webpackJsonp([0],{139:function(l,n){function e(l){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+l+"'.")})}e.keys=function(){return[]},e.resolve=e,l.exports=e,e.id=139},170:function(l,n){function e(l){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+l+"'.")})}e.keys=function(){return[]},e.resolve=e,l.exports=e,e.id=170},211:function(l,n,e){"use strict";function t(l){return d["ɵvid"](0,[(l()(),d["ɵeld"](0,0,null,null,2,"ion-nav",[],null,null,null,A.b,A.a)),d["ɵprd"](6144,null,P.a,null,[w.a]),d["ɵdid"](2,4374528,null,0,w.a,[[2,S.a],[2,M.a],V.a,_.a,j.a,d.ElementRef,d.NgZone,d.Renderer,d.ComponentFactoryResolver,L.l,T.a,[2,F.a],Z.a,d.ErrorHandler],{root:[0,"root"]},null),(l()(),d["ɵted"](-1,null,["\n"]))],function(l,n){l(n,2,0,n.component.rootPage)},null)}function o(l){return d["ɵvid"](0,[(l()(),d["ɵeld"](0,0,null,null,1,"h1",[],null,null,null,null,null)),(l()(),d["ɵted"](-1,null,["INCOMMING CALL..."]))],null,null)}function a(l){return d["ɵvid"](0,[(l()(),d["ɵeld"](0,0,null,null,1,"h1",[],null,null,null,null,null)),(l()(),d["ɵted"](-1,null,["CALLING..."]))],null,null)}function u(l){return d["ɵvid"](0,[d["ɵqud"](402653184,1,{rtcVideo:0}),d["ɵqud"](402653184,2,{locVideo:0}),(l()(),d["ɵeld"](2,0,null,null,10,"ion-header",[],null,null,null,null,null)),d["ɵdid"](3,16384,null,0,U.a,[_.a,d.ElementRef,d.Renderer,[2,S.a]],null,null),(l()(),d["ɵted"](-1,null,["\n  "])),(l()(),d["ɵeld"](5,0,null,null,6,"ion-navbar",[["class","toolbar"],["color","primary"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,q.b,q.a)),d["ɵdid"](6,49152,null,0,J.a,[V.a,[2,S.a],[2,M.a],_.a,d.ElementRef,d.Renderer],{color:[0,"color"]},null),(l()(),d["ɵted"](-1,3,["\n    "])),(l()(),d["ɵeld"](8,0,null,3,2,"ion-title",[],null,null,null,K.b,K.a)),d["ɵdid"](9,49152,null,0,z.a,[_.a,d.ElementRef,d.Renderer,[2,B.a],[2,J.a]],null,null),(l()(),d["ɵted"](-1,0,["\n      Ionic Blank\n    "])),(l()(),d["ɵted"](-1,3,["\n  "])),(l()(),d["ɵted"](-1,null,["\n"])),(l()(),d["ɵted"](-1,null,["\n\n"])),(l()(),d["ɵeld"](14,0,null,null,51,"ion-content",[["padding",""]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,x.b,x.a)),d["ɵdid"](15,4374528,null,0,H.a,[_.a,j.a,Z.a,d.ElementRef,d.Renderer,V.a,W.a,d.NgZone,[2,S.a],[2,M.a]],null,null),(l()(),d["ɵted"](-1,1,["\n  "])),(l()(),d["ɵeld"](17,0,null,1,40,"div",[["class","content"]],null,null,null,null,null)),(l()(),d["ɵted"](-1,null,["\n    "])),(l()(),d["ɵand"](16777216,null,null,1,null,o)),d["ɵdid"](20,16384,null,0,Q.i,[d.ViewContainerRef,d.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),d["ɵted"](-1,null,["\n    "])),(l()(),d["ɵand"](16777216,null,null,1,null,a)),d["ɵdid"](23,16384,null,0,Q.i,[d.ViewContainerRef,d.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),d["ɵted"](-1,null,["\n    "])),(l()(),d["ɵted"](-1,null,["\n    "])),(l()(),d["ɵeld"](26,0,null,null,30,"ion-grid",[["class","button-group grid"]],null,null,null,null,null)),d["ɵdid"](27,16384,null,0,X.a,[],null,null),(l()(),d["ɵted"](-1,null,["\n      "])),(l()(),d["ɵeld"](29,0,null,null,26,"ion-row",[["class","row"]],null,null,null,null,null)),d["ɵdid"](30,16384,null,0,Y.a,[],null,null),(l()(),d["ɵted"](-1,null,["\n        "])),(l()(),d["ɵeld"](32,0,null,null,6,"ion-col",[["class","col"]],null,null,null,null,null)),d["ɵdid"](33,16384,null,0,$.a,[],null,null),(l()(),d["ɵted"](-1,null,["\n          "])),(l()(),d["ɵeld"](35,0,null,null,2,"button",[["block",""],["color","primary"],["ion-button",""]],[[8,"disabled",0]],[[null,"click"]],function(l,n,e){var t=!0;if("click"===n){t=!1!==l.component.connect()&&t}return t},ll.b,ll.a)),d["ɵdid"](36,1097728,null,0,nl.a,[[8,""],_.a,d.ElementRef,d.Renderer],{color:[0,"color"],block:[1,"block"]},null),(l()(),d["ɵted"](-1,0,["Connect"])),(l()(),d["ɵted"](-1,null,["\n        "])),(l()(),d["ɵted"](-1,null,["\n        "])),(l()(),d["ɵeld"](40,0,null,null,6,"ion-col",[["class","col"]],null,null,null,null,null)),d["ɵdid"](41,16384,null,0,$.a,[],null,null),(l()(),d["ɵted"](-1,null,["\n          "])),(l()(),d["ɵeld"](43,0,null,null,2,"button",[["block",""],["color","secondary"],["ion-button",""]],[[8,"disabled",0]],[[null,"click"]],function(l,n,e){var t=!0;if("click"===n){t=!1!==l.component.message()&&t}return t},ll.b,ll.a)),d["ɵdid"](44,1097728,null,0,nl.a,[[8,""],_.a,d.ElementRef,d.Renderer],{color:[0,"color"],block:[1,"block"]},null),(l()(),d["ɵted"](-1,0,["Ping"])),(l()(),d["ɵted"](-1,null,["\n        "])),(l()(),d["ɵted"](-1,null,["\n        "])),(l()(),d["ɵeld"](48,0,null,null,6,"ion-col",[["class","col"]],null,null,null,null,null)),d["ɵdid"](49,16384,null,0,$.a,[],null,null),(l()(),d["ɵted"](-1,null,["\n          "])),(l()(),d["ɵeld"](51,0,null,null,2,"button",[["block",""],["color","danger"],["ion-button",""]],[[8,"disabled",0]],[[null,"click"]],function(l,n,e){var t=!0;if("click"===n){t=!1!==l.component.disconnect()&&t}return t},ll.b,ll.a)),d["ɵdid"](52,1097728,null,0,nl.a,[[8,""],_.a,d.ElementRef,d.Renderer],{color:[0,"color"],block:[1,"block"]},null),(l()(),d["ɵted"](-1,0,["Disconnect"])),(l()(),d["ɵted"](-1,null,["\n        "])),(l()(),d["ɵted"](-1,null,["\n      "])),(l()(),d["ɵted"](-1,null,["\n    "])),(l()(),d["ɵted"](-1,null,["\n  "])),(l()(),d["ɵted"](-1,1,["\n  \n  "])),(l()(),d["ɵeld"](59,0,null,1,3,"div",[["class","video-container"]],null,null,null,null,null)),(l()(),d["ɵted"](-1,null,["\n    "])),(l()(),d["ɵeld"](61,0,[[1,0],["rtcVideo",1]],null,0,"video",[],null,null,null,null,null)),(l()(),d["ɵted"](-1,null,["\n  "])),(l()(),d["ɵted"](-1,1,["\n\n  "])),(l()(),d["ɵeld"](64,0,[[2,0],["locVideo",1]],1,0,"video",[["class","myvideo"],["constrols",""],["width","120"]],null,null,null,null,null)),(l()(),d["ɵted"](-1,1,["\n"])),(l()(),d["ɵted"](-1,null,["\n"]))],function(l,n){var e=n.component;l(n,6,0,"primary");l(n,20,0,!e.caller&&e.targetpeer&&!e.isConnected);l(n,23,0,e.caller&&!e.isConnected);l(n,36,0,"primary","");l(n,44,0,"secondary","");l(n,52,0,"danger","")},function(l,n){var e=n.component;l(n,5,0,d["ɵnov"](n,6)._hidden,d["ɵnov"](n,6)._sbPadding);l(n,14,0,d["ɵnov"](n,15).statusbarPadding,d["ɵnov"](n,15)._hasRefresher);l(n,35,0,e.caller||e.isConnected);l(n,43,0,!e.isConnected);l(n,51,0,!e.isConnected)})}Object.defineProperty(n,"__esModule",{value:!0});var i=e(33),d=e(0),r=(e(4),e(86),e(74)),c=e(75),s=e(76),p=(e(197),function(){function l(l,n){this.navCtrl=l,this.socket=n,this.n=navigator,this.caller=!1,this.isConnected=!1,this.isInit=!1,this.roomId="vidoe-call"}return l.prototype.ionViewDidLoad=function(){this.startAnu()},l.prototype.startAnu=function(){var l=this;this.caller="#call"===location.hash,this.socket.connect(),this.socket.emit("subscribe",this.roomId),this.socket.on("start-call",function(n){var e=n;"offer"===e.data.type?"#call"!==location.hash&&(console.log("offer:",e.data),l.targetpeer=JSON.stringify(e.data)):"#call"===location.hash&&(console.log("answer:",e.data),l.targetpeer=JSON.stringify(e.data),l.peer&&l.peer.signal(JSON.parse(l.targetpeer)))}),this.socket.on("in-call",function(n){console.log("in-call"),l.isConnected=!0}),this.socket.on("chat-call",function(l){var n=l;console.log(n.message)}),this.socket.on("stop-call",function(n){l.isConnected=!1,console.log("stop-call")}),this.init()},l.prototype.init=function(){var l=this;this.n.getUserMedia=this.n.getUserMedia||this.n.webkitGetUserMedia||this.n.mozGetUserMedia||this.n.msGetUserMedia,this.n.getUserMedia({video:!0,audio:!0},function(n){l.locVideo.nativeElement.srcObject||(l.locVideo.nativeElement.srcObject=n),l.locVideo.nativeElement.play(),l.peer=new SimplePeer({initiator:"#call"===location.hash,trickle:!1,stream:n,iceTransportPolicy:"relay",config:{iceServers:[{url:"stun:numb.viagenie.ca",credential:"4Bahagia4",username:"davchezt@gmail.com"},{url:"turn:numb.viagenie.ca",credential:"4Bahagia4",username:"davchezt@gmail.com"}]}}),l.peer.on("connect",function(){l.socket.emit("in-call",{room:l.roomId}),console.log("peer connect"),console.log("isConnected: ",l.isConnected)}),l.peer.on("signal",function(n){l.socket.emit("start-call",{room:l.roomId,data:n})}),l.peer.on("data",function(l){console.log("Recieved message:"+l)}),l.peer.on("stream",function(n){l.rtcVideo.nativeElement.srcObject=n,l.rtcVideo.nativeElement.play()}),l.peer.on("close",function(){console.log("peer close"),l.disconnect(),l.socket.emit("stop-call",{room:l.roomId})}),l.peer.on("error",function(n){console.log(n),l.targetpeer=null,l.isConnected=!1})},function(l){console.log("Failed to get stream",l)})},l.prototype.connect=function(){this.peer&&this.peer.signal(JSON.parse(this.targetpeer))},l.prototype.message=function(){this.peer&&this.socket.emit("chat-call",{room:this.roomId,message:"ping!"})},l.prototype.disconnect=function(){this.peer&&(this.rtcVideo.nativeElement.pause(),this.rtcVideo.nativeElement.srcObject=null,this.peer.destroy(),this.peer=null,this.targetpeer=null,this.init())},l}()),m=function(){return function(l,n,e,t){this.rootPage=p,l.ready().then(function(){n.styleDefault(),e.hide(),t.enable()})}}(),f=e(209),h=e(210),g=function(){return function(){}}(),b=e(47),v=e(267),k=e(268),y=e(269),C=e(270),I=e(271),R=e(272),E=e(273),N=e(274),O=e(275),A=e(276),P=e(36),w=e(53),S=e(5),M=e(17),V=e(8),_=e(1),j=e(3),L=e(7),T=e(28),F=e(14),Z=e(9),D=d["ɵcrt"]({encapsulation:2,styles:[],data:{}}),G=d["ɵccf"]("ng-component",m,function(l){return d["ɵvid"](0,[(l()(),d["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,t,D)),d["ɵdid"](1,49152,null,0,m,[j.a,c.a,r.a,s.a],null,null)],null,null)},{},{},[]),U=e(116),q=e(277),J=e(32),K=e(278),z=e(73),B=e(43),x=e(279),H=e(21),W=e(30),Q=e(12),X=e(95),Y=e(96),$=e(94),ll=e(37),nl=e(18),el=e(77),tl=d["ɵcrt"]({encapsulation:2,styles:[],data:{}}),ol=d["ɵccf"]("page-home",p,function(l){return d["ɵvid"](0,[(l()(),d["ɵeld"](0,0,null,null,1,"page-home",[],null,null,null,u,tl)),d["ɵdid"](1,49152,null,0,p,[M.a,el.WrappedSocket],null,null)],null,null)},{},{},[]),al=e(124),ul=e(19),il=e(90),dl=e(92),rl=e(121),cl=e(16),sl=e(31),pl=e(101),ml=e(195),fl=e(49),hl=e(42),gl=e(103),bl=e(61),vl=e(108),kl=e(120),yl=e(115),Cl=e(125),Il=e(194),Rl=e(122),El=e(26),Nl=e(102),Ol=e(123),Al=d["ɵcmf"](g,[b.b],function(l){return d["ɵmod"]([d["ɵmpd"](512,d.ComponentFactoryResolver,d["ɵCodegenComponentFactoryResolver"],[[8,[v.a,k.a,y.a,C.a,I.a,R.a,E.a,N.a,O.a,G,ol]],[3,d.ComponentFactoryResolver],d.NgModuleRef]),d["ɵmpd"](5120,d.LOCALE_ID,d["ɵq"],[[3,d.LOCALE_ID]]),d["ɵmpd"](4608,Q.k,Q.j,[d.LOCALE_ID,[2,Q.s]]),d["ɵmpd"](5120,d.APP_ID,d["ɵi"],[]),d["ɵmpd"](5120,d.IterableDiffers,d["ɵn"],[]),d["ɵmpd"](5120,d.KeyValueDiffers,d["ɵo"],[]),d["ɵmpd"](4608,i.c,i.q,[Q.c]),d["ɵmpd"](6144,d.Sanitizer,null,[i.c]),d["ɵmpd"](4608,i.f,al.a,[]),d["ɵmpd"](5120,i.d,function(l,n,e,t,o){return[new i.k(l,n),new i.o(e),new i.n(t,o)]},[Q.c,d.NgZone,Q.c,Q.c,i.f]),d["ɵmpd"](4608,i.e,i.e,[i.d,d.NgZone]),d["ɵmpd"](135680,i.m,i.m,[Q.c]),d["ɵmpd"](4608,i.l,i.l,[i.e,i.m]),d["ɵmpd"](6144,d.RendererFactory2,null,[i.l]),d["ɵmpd"](6144,i.p,null,[i.m]),d["ɵmpd"](4608,d.Testability,d.Testability,[d.NgZone]),d["ɵmpd"](4608,i.h,i.h,[Q.c]),d["ɵmpd"](4608,i.i,i.i,[Q.c]),d["ɵmpd"](4608,ul.k,ul.k,[]),d["ɵmpd"](4608,ul.c,ul.c,[]),d["ɵmpd"](4608,il.a,il.a,[V.a,_.a]),d["ɵmpd"](4608,dl.a,dl.a,[V.a,_.a]),d["ɵmpd"](4608,rl.a,rl.a,[]),d["ɵmpd"](4608,cl.a,cl.a,[]),d["ɵmpd"](4608,sl.a,sl.a,[j.a]),d["ɵmpd"](4608,W.a,W.a,[_.a,j.a,d.NgZone,Z.a]),d["ɵmpd"](4608,pl.a,pl.a,[V.a,_.a]),d["ɵmpd"](5120,Q.f,ml.b,[Q.q,[2,Q.a],_.a]),d["ɵmpd"](4608,Q.e,Q.e,[Q.f]),d["ɵmpd"](5120,fl.b,fl.d,[V.a,fl.a]),d["ɵmpd"](5120,F.a,F.b,[V.a,fl.b,Q.e,hl.b,d.ComponentFactoryResolver]),d["ɵmpd"](4608,gl.a,gl.a,[V.a,_.a,F.a]),d["ɵmpd"](4608,bl.a,bl.a,[V.a,_.a]),d["ɵmpd"](4608,vl.a,vl.a,[V.a,_.a,F.a]),d["ɵmpd"](4608,kl.a,kl.a,[_.a,j.a,Z.a,V.a,L.l]),d["ɵmpd"](4608,yl.a,yl.a,[V.a,_.a]),d["ɵmpd"](4608,T.a,T.a,[j.a,_.a]),d["ɵmpd"](5120,el.WrappedSocket,Cl.SocketFactory,[Cl.SOCKET_CONFIG_TOKEN]),d["ɵmpd"](4608,c.a,c.a,[]),d["ɵmpd"](4608,r.a,r.a,[]),d["ɵmpd"](4608,f.a,f.a,[]),d["ɵmpd"](4608,s.a,s.a,[]),d["ɵmpd"](4608,h.a,h.a,[]),d["ɵmpd"](512,Q.b,Q.b,[]),d["ɵmpd"](512,d.ErrorHandler,Il.a,[]),d["ɵmpd"](256,_.b,{mode:"ios",backButtonText:" "},[]),d["ɵmpd"](1024,Rl.a,Rl.b,[]),d["ɵmpd"](1024,j.a,j.b,[i.b,Rl.a,d.NgZone]),d["ɵmpd"](1024,_.a,_.c,[_.b,j.a]),d["ɵmpd"](512,Z.a,Z.a,[j.a]),d["ɵmpd"](512,El.a,El.a,[]),d["ɵmpd"](512,V.a,V.a,[_.a,j.a,[2,El.a]]),d["ɵmpd"](512,L.l,L.l,[V.a]),d["ɵmpd"](256,fl.a,{links:[]},[]),d["ɵmpd"](512,d.Compiler,d.Compiler,[]),d["ɵmpd"](512,Nl.a,Nl.a,[d.Compiler]),d["ɵmpd"](1024,hl.b,hl.c,[Nl.a,d.Injector]),d["ɵmpd"](1024,d.APP_INITIALIZER,function(l,n,e,t,o,a,u,d,r,c,s,p,m){return[i.s(l),Ol.a(n),rl.b(e,t),kl.b(o,a,u,d,r),hl.d(c,s,p,m)]},[[2,d.NgProbeToken],_.a,j.a,Z.a,_.a,j.a,Z.a,V.a,L.l,_.a,fl.a,hl.b,d.NgZone]),d["ɵmpd"](512,d.ApplicationInitStatus,d.ApplicationInitStatus,[[2,d.APP_INITIALIZER]]),d["ɵmpd"](131584,d.ApplicationRef,d.ApplicationRef,[d.NgZone,d["ɵConsole"],d.Injector,d.ErrorHandler,d.ComponentFactoryResolver,d.ApplicationInitStatus]),d["ɵmpd"](512,d.ApplicationModule,d.ApplicationModule,[d.ApplicationRef]),d["ɵmpd"](512,i.a,i.a,[[3,i.a]]),d["ɵmpd"](512,ul.j,ul.j,[]),d["ɵmpd"](512,ul.d,ul.d,[]),d["ɵmpd"](512,ul.i,ul.i,[]),d["ɵmpd"](512,ml.a,ml.a,[]),d["ɵmpd"](512,Cl.SocketIoModule,Cl.SocketIoModule,[]),d["ɵmpd"](512,g,g,[]),d["ɵmpd"](256,b.a,m,[]),d["ɵmpd"](256,Q.a,"/",[]),d["ɵmpd"](256,Cl.SOCKET_CONFIG_TOKEN,{url:"https://militant-socket-server.herokuapp.com",options:{}},[])])});Object(d.enableProdMode)(),Object(i.j)().bootstrapModuleFactory(Al)},264:function(l,n){}},[211]);